<div class="container grid">
  <!-- Formulário (Esquerda) -->
  <div class="col-6">
    <p-card class="card-container">
      <ng-template pTemplate="header">
        <h3>Simulação - Renda Fixa</h3> <p-button label="Limpar" icon="pi pi-refresh" (click)="limpar()" class="clean-button"></p-button>
      </ng-template>

      <ng-template pTemplate="content">
        <form [formGroup]="simulacaoForm">
          <div class="form-container">
            <div class="p-fluid p-grid">

              <p-inputgroup>
                <p-inputGroupAddon>
                  <i class="pi pi-dollar"></i>
                </p-inputGroupAddon>
                <p-floatlabel  variant="in">
                  <p-inputNumber id="valorInicial" formControlName="valorInicial"
                    mode="currency" currency="BRL" min="0.0" > </p-inputNumber>
                  <label for="valorInicial">Valor inicial</label>
                </p-floatlabel>
              </p-inputgroup>
                
              <p-inputgroup>
                <p-inputGroupAddon>
                  <i class="pi pi-dollar"></i>
                </p-inputGroupAddon>
                <p-floatlabel  variant="in">
                  <p-inputNumber id="aporteMensal" formControlName="aporteMensal"
                    mode="currency" currency="BRL" min="0.0" > </p-inputNumber>
                  <label for="aporteMensal">Aporte mensal</label>
                </p-floatlabel>
              </p-inputgroup>

              <p-inputGroup>
                <p-inputGroupAddon>
                  <i class="pi pi-calendar"></i>
                </p-inputGroupAddon>
                <p-floatlabel  variant="in">
                 <p-inputNumber id="tempo" formControlName="tempo" [min]="1"></p-inputNumber>
                 <label for="tempo">Tempo</label>
                </p-floatlabel>
                <p-inputGroupAddon>
                  <p-select [options]="periodoOptions" formControlName="periodo"></p-select>
                </p-inputGroupAddon>
              </p-inputGroup>

              <p-inputgroup>
                <p-inputGroupAddon>
                  <i class="pi pi-chart-line"></i>
                </p-inputGroupAddon>
                <p-floatlabel  variant="in">
                  <p-inputNumber id="taxaDI" formControlName="taxaDI"
                    mode="decimal" min="0.0" > </p-inputNumber>
                  <label for="taxaDI">Taxa DI</label>
                </p-floatlabel>
                <p-inputGroupAddon>
                  % a.a.
                </p-inputGroupAddon>
              </p-inputgroup>

              <p-inputgroup>
                <p-inputGroupAddon>
                  <i class="pi pi-percentage"></i>
                </p-inputGroupAddon>
                <p-floatlabel  variant="in">
                  <p-inputNumber id="taxaCDB" formControlName="taxaCDB"
                    mode="decimal" min="0.0" > </p-inputNumber>
                  <label for="taxaCDB">Taxa CDB</label>
                </p-floatlabel>
                <p-inputGroupAddon>
                  <p-select [options]="fixadoOptions" formControlName="fixadoCDB" (onChange)="resetarTaxa('taxaCDB')"></p-select>
                </p-inputGroupAddon>
              </p-inputgroup>

              <p-inputgroup>
                <p-inputGroupAddon>
                  <i class="pi pi-percentage"></i>
                </p-inputGroupAddon>
                <p-floatlabel  variant="in">
                  <p-inputNumber id="taxaLC" formControlName="taxaLC"
                    mode="decimal" min="0.0" > </p-inputNumber>
                  <label for="taxaLC">Taxa LCA/LCI</label>
                </p-floatlabel>
                <p-inputGroupAddon>
                  <p-select [options]="fixadoOptions" formControlName="fixadoLC" (onChange)="resetarTaxa('taxaLC')"></p-select>
                </p-inputGroupAddon>
              </p-inputgroup>
            </div>
          </div>
        </form>
      </ng-template>
    </p-card>
  </div>

  <!-- Gráfico (Direita) -->
  <div class="col-6">
    <p-card class="card-container">
      <ng-template pTemplate="header">
        <p-tabMenu [model]="tabs" (onTabChange)="onTabChange($event)"></p-tabMenu>
      </ng-template>
  
      <ng-template pTemplate="content">
        
        <div *ngIf="activeTab === 'dados'">
          <p-accordion [activeIndex]="activePanels" [multiple]="true">
            <app-simulacao-dados
              [poupanca]="poupanca"
              [cdb]="cdb"
              [lca_lci]="lca_lci"
              [simulacaoForm]="simulacaoForm"
            ></app-simulacao-dados>
          </p-accordion> 
        </div>

        <div *ngIf="activeTab === 'grafico'">
          <p-chart type="bar" [data]="chartData" [options]="chartOptions"></p-chart>
        </div>
      </ng-template>
    </p-card>
  </div>
</div>
